resources:
  - url: /hacsfiles/flex-horseshoe-card/flex-horseshoe-card.js
    type: module
background: var(--lovelace-background)
kiosk_mode:
  non_admin_settings:
    kiosk: true
button_card_templates: #these are our templates
  titre: #this is my template for section titles, it is very simple, I wont comment it all
    styles:
      card:
        - height: 50px
        - padding-top: 55px
        - margin-top: 5px
        - border: none
        - background: none
      img_cell:
        - align-self: start
        - text-align: start
      name:
        - justify-self: start
        - padding-left: 10px
        - text-transform: lowercase
        - null
        - font-size: 25px
        - letter-spacing: 0.7em
    card_mod:
      style: |
        ha-card {
          --primary-text-color: rgb(var(--my-grey));   
        }
  light: #these is my main template for on/off buttons
    size: 35% #icon size
    show_state: true #we want to show the state
    tap_action:
      haptic: heavy #heavy haptic feedback when clicking on it
      action: toggle #clicking on it will toggle the wsitch
    styles:
      icon:
        - color: rgb(var(--my-grey),0.8) #icon color (my-grey is defined in the theme file)
      card:
        - width: 120px #button width
        - height: 120px #button height
        - margin: auto
      grid:
        - grid-template-areas: '"i" "n" "s"' #layout grid for the various items of the button: Image, Name and State
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr min-content min-content
      img_cell: #Simply the alignment of the icon
        - align-self: start
        - text-align: start
        - justify-content: start
        - padding-left: 15px
      name: #name format
        - justify-self: start #we start from the left
        - padding-left: 12px #we leave a 12px padding from the ledt
        - font-weight: bold #bold font
        - text-transform: lowercase #I like lower case!
        - letter-spacing: 0.2em #I also like increasing the spacing between the letters
        - font-size: 17px #font size
        - padding-bottom: 2px #small padding fromn the bottom
      state: #Formatting the state
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - text-transform: lowercase
        - letter-spacing: 0.2em
        - font-size: 12px
        - opacity: 0.6
        - padding-bottom: 5px
        - opacity: 0.6
    state: #state defined formatting
      - value: 'on' #when state is ON
        styles:
          icon:
            - color: rgb(var(--my-orange)) #The icon will turn orange
          card:
            - background-color: rgba(var(--my-orange),0.2) #background color will rurn orange as well
            - box-shadow: var(--my-box-shadow) #shadow will be an inlay shadow (defined in the theme file)
    card_mod: #default card style
      class: soft-ui #use the card style defined in the theme yaml file
      style: |
        ha-card {
          --primary-text-color: rgb(var(--my-grey));    
        }
  sensor:
    size: 40%
    show_state: true
    tap_action:
      haptic: heavy
      action: toggle
    styles:
      card:
        - width: 80px
        - height: 80px
        - border-radius: 40px
        - box-shadow: rgba(var(--my-orange), 0.3) 0px -50px 36px -28px inset;
        - border: none
      icon:
        - color: rgba(var(--my-orange), 1)
      grid:
        - grid-template-areas: '"n" "i" "s"'
        - grid-template-rows: min-content 40px min-content
      name:
        - width: 80px
        - height: 20px
        - font-size: 14px
        - font-weight: light
        - letter-spacing: 0.1em
      img_cell: null
      state:
        - font-size: 14px
        - justify-self: bottom
        - text-align: center
        - letter-spacing: 0.2em
        - font-weight: bold
    card_mod:
      style: |
        ha-card {
          --primary-text-color: rgb(var(--my-grey));   
        }
  aspirateur:
    size: 35%
    show_state: true
    tap_action:
      haptic: heavy
      action: more-info
    styles:
      icon:
        - color: rgb(var(--my-grey),0.8)
      card:
        - width: 120px
        - height: 120px
        - margin: auto
      grid:
        - grid-template-areas: '"i" "n" "s"'
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr min-content min-content
      img_cell:
        - align-self: start
        - text-align: start
        - justify-content: start
        - padding-left: 15px
      name:
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - text-transform: lowercase
        - letter-spacing: 0.2em
        - font-size: 17px
        - padding-bottom: 2px
      state:
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - text-transform: lowercase
        - font-size: 12px
        - opacity: 0.6
        - letter-spacing: 0.2em
        - padding-bottom: 5px
        - opacity: 0.6
    state:
      - value: cleaning
        styles:
          icon:
            - color: rgb(var(--my-orange))
            - animation: rotating 2s ease infinite
          card:
            - background-color: rgba(var(--my-orange),0.2)
            - box-shadow: var(--my-box-shadow)
    card_mod:
      class: soft-ui
      style: |
        ha-card {
          --primary-text-color: rgb(var(--my-grey));   
        }
  portail:
    size: 35%
    show_state: true
    tap_action:
      haptic: heavy
      action: toggle
    styles:
      icon:
        - color: rgb(var(--my-green),0.8)
      card:
        - width: 120px
        - height: 120px
        - margin: auto
      grid:
        - grid-template-areas: '"i" "n" "s"'
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr min-content min-content
      img_cell:
        - align-self: start
        - text-align: start
        - justify-content: start
        - padding-left: 15px
      name:
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - text-transform: lowercase
        - letter-spacing: 0.2em
        - font-size: 17px
        - padding-bottom: 2px
      state:
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - font-size: 12px
        - opacity: 0.6
        - letter-spacing: 0.2em
        - padding-bottom: 5px
        - opacity: 0.6
    state:
      - value: 'on'
        icon: mdi:gate-open
        styles:
          icon:
            - color: rgb(var(--my-red))
            - animation: blink 2s ease infinite
          card:
            - background-color: rgba(var(--my-red),0.2)
            - box-shadow: var(--my-box-shadow)
    card_mod:
      class: soft-ui
      style: |
        ha-card {
          --primary-text-color: rgb(var(--my-grey));   
        }
  button_single:
    show_state: true
    styles:
      icon:
        - color: rgba(var(--my-blue),0.8)
      card:
        - width: 120px
        - height: 120px
        - margin: auto
      grid:
        - grid-template-areas: '"i" "n" "s"'
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr min-content min-content
      img_cell:
        - align-self: start
        - text-align: start
        - justify-content: start
        - padding-left: 15px
      name:
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - text-transform: lowercase
        - letter-spacing: 0.2em
        - font-size: 17px
        - padding-bottom: 2px
      state:
        - justify-self: start
        - padding-left: 12px
        - font-weight: bold
        - font-size: 12px
        - opacity: 0.6
        - letter-spacing: 0.2em
        - padding-bottom: 5px
        - opacity: 0.6
    card_mod:
      class: soft-ui
      style: |
        ha-card {
          --primary-text-color: rgb(var(--my-grey));   
        }
  frame:
    color_type: label-card
    styles:
      card:
        - padding: 0
        - background-color: transparent
        - opacity: 100%
        - margin: 0 auto
      grid:
        - grid-template-areas: '"buttons"'
        - grid-template-columns: 1fr
        - grid-template-rows: 1fr min-content min-content
      custom_fields:
        buttons:
          - margin: 0
          - padding: 0.5em
          - position: relative
          - left: 0
sidebar:
  digitalClock: true
  date: true
  dateFormat: dddd D MMMM
  hideTopMenu: false
  width:
    desktop: 12
    mobile: 0
    tablet: 12
  sidebarMenu:
    - action: navigate
      active: true
      name: Home
      navigation_path: /dashboard-cuisine/home
      icon: mdi:dots-grid
    - action: navigate
      active: true
      name: CCTV
      navigation_path: /dashboard-cuisine/cctv
      icon: mdi:cctv
    - action: navigate
      active: true
      name: Consos
      navigation_path: /dashboard-cuisine/consos
      icon: mdi:chart-areaspline
    - action: navigate
      active: true
      name: extra
      navigation_path: /dashboard-cuisine/extra
      icon: mdi:star-plus
    - action: navigate
      active: true
      name: musique
      navigation_path: /dashboard-cuisine/music
      icon: mdi:music
    - action: navigate
      active: false
      name: Recettes
      navigation_path: /dashboard-cuisine/recettes
      icon: mdi:chef-hat
  template: |
    <li>
      {% if is_state('input_boolean.lavelingefini', 'on') %}{{'\U0001f9fa'}} Lave-Linge terminé {% endif %} 
    </li> 
    <li>
      {% if states('sensor.lave_linge_remaining_time') != '0:00:00' %} {{'\U0001f9fa'}} {{ states('sensor.lave_linge_remaining_time')}} restant {% endif %}
    </li> 
    <li>
      {% if is_state('sensor.rte_tempo_prochaine_couleur', 'Rouge') %}{{'\u26A1'}} Demain, jour sobriété {% endif %}
    </li>
    <li>
      {% if (states('person.tibou') != 'home') and (states('input_boolean.tibourevient') == 'on') %} {{'\U0001F698'}} ETA Tibou : {{ states('sensor.eta_tibou_maison')}}min {% endif %}
    </li> 
    <li>
      {% if (states('person.mathieu_goy') != 'home') and (states('input_boolean.mathieurevient') == 'on') %} {{'\U0001F698'}} ETA Nathieu : {{ states('sensor.eta_nathieu_maison')}}min {% endif %}
    </li> 
    <li>
      {% if is_state('binary_sensor.salleserveuroctoprint_printing', 'on') %}{{'🖨️'}} {{ states('sensor.salleserveuroctoprint_print_time_left')|int|timestamp_custom('%H:%M:%S', false)}} restant {% endif %}
    </li> 
    <li>
      {% if is_state('vacuum.roborock_s7', 'cleaning') %}{{'\U0001F916'}} {{ (states('sensor.roborock_s7_current_clean_area')|float * 1.25)|round(0)}}% aspiré par Alfred {% endif %}
    </li>
    <li>
      {% if is_state('binary_sensor.charging', 'on') %}{{'\U0001f50c'}} {{'\U0001F698'}} {{ states('sensor.time_charge_complete')|int|timestamp_custom('%H:%M:%S', false)}} restant {% endif %}
    </li>
    <li>
      {% if (states('sensor.mokka_battery_level')|float) < 31 %} 🪫 Mokka à {{ states('sensor.mokka_battery_level')|round(0)}}% {% endif %}
    </li>
    <li>
      {% if (states('sensor.battery')|float) < 31 %} 🪫 Tesla à {{ states('sensor.battery')|round(0)}}% {% endif %}
    </li>
    <li>
      {% if (now().strftime('%A') == 'Monday') and (now().hour > 17) %} 🟤 poubelle marron {% endif %}
    </li>
    <li>
      {% if (now().strftime('%A') == 'Sunday') and (now().hour > 17) %} 🟢 poubelle verte {% endif %}
    </li>  
    <li>
      {% if (now().strftime('%A') == 'Wednesday') and (now().hour > 17) %} 🟢 poubelle verte {% endif %}
    </li> 
    <li>
      {% if (now().strftime('%A') == 'Tuesday') and (now().hour > 17) %} 🟡 poubelle jaune {% endif %}
    </li> 
  bottomCard:
    type: custom:vertical-stack-in-card
    cardStyle: |
      ha-card {

        border: none;
        background: none;
        overflow: hidden !important;
        box-shadow: none !important;
        ha-card-border-radius: 0px;

      }
    cardOptions:
      cards:
        - type: horizontal-stack
          cards:
            - type: conditional
              conditions:
                - entity: counter.douche1
                  state_not: '0'
              card:
                type: custom:mushroom-template-card
                primary: '{{states(''sensor.eau_douche1'')}}L'
                tap_action:
                  action: none
                icon: mdi:shower-head
                icon_color: |-
                  {% set state = states('sensor.eau_douche1') %}
                  {% if  state | float > 0 and state | float <= 40%}
                   green
                  {% endif %}
                  {% if  state | float > 40 and state | float <= 80%}
                   orange
                  {% endif %}
                  {% if  state | float > 80%}
                   red
                  {% endif %}
                  {% if  state | float == 0 %}
                   grey
                  {% endif %}
                multiline_secondary: true
                layout: vertical
                card_mod:
                  style: |
                    ha-card {
                    background-color: transparent;
                    border: transparent;
                    margin-bottom: -25px !important;

                      --primary-text-color: rgb(var(--my-grey));
            - type: conditional
              conditions:
                - entity: counter.douche2
                  state_not: '0'
              card:
                type: custom:mushroom-template-card
                primary: '{{states(''sensor.eau_douche2'')}}L'
                tap_action:
                  action: none
                icon: mdi:shower-head
                icon_color: |-
                  {% set state = states('sensor.eau_douche2') %}
                  {% if  state | float > 0 and state | float <= 40%}
                   green
                  {% endif %}
                  {% if  state | float > 40 and state | float <= 80%}
                   orange
                  {% endif %}
                  {% if  state | float > 80%}
                   red
                  {% endif %}
                  {% if  state | float == 0 %}
                   grey
                  {% endif %}
                multiline_secondary: true
                layout: vertical
                card_mod:
                  style: |
                    ha-card {
                    background-color: transparent;
                    border: transparent;
                    margin-bottom: -25px !important;

                      --primary-text-color: rgb(var(--my-grey));
            - type: conditional
              conditions:
                - entity: counter.douche3
                  state_not: '0'
              card:
                type: custom:mushroom-template-card
                primary: '{{states(''sensor.eau_douche3'')}}L'
                tap_action:
                  action: none
                icon: mdi:shower-head
                icon_color: |-
                  {% set state = states('sensor.eau_douche3') %}
                  {% if  state | float > 0 and state | float <= 40%}
                   green
                  {% endif %}
                  {% if  state | float > 40 and state | float <= 80%}
                   orange
                  {% endif %}
                  {% if  state | float > 80%}
                   red
                  {% endif %}
                  {% if  state | float == 0 %}
                   grey
                  {% endif %}
                multiline_secondary: true
                layout: vertical
                card_mod:
                  style: |
                    ha-card {
                    background-color: transparent;
                    border: transparent;
                    margin-bottom: -25px !important;

                      --primary-text-color: rgb(var(--my-grey));
        - type: horizontal-stack
          cards:
            - type: conditional
              conditions:
                - entity: counter.douche4
                  state_not: '0'
              card:
                type: custom:mushroom-template-card
                primary: '{{states(''sensor.eau_douche4'')}}L'
                tap_action:
                  action: none
                icon: mdi:shower-head
                icon_color: |-
                  {% set state = states('sensor.eau_douche4') %}
                  {% if  state | float > 0 and state | float <= 40%}
                   green
                  {% endif %}
                  {% if  state | float > 40 and state | float <= 80%}
                   orange
                  {% endif %}
                  {% if  state | float > 80%}
                   red
                  {% endif %}
                  {% if  state | float == 0 %}
                   grey
                  {% endif %}
                multiline_secondary: true
                layout: vertical
                card_mod:
                  style: |
                    ha-card {
                    background-color: transparent;
                    border: transparent;
                    margin-bottom: -25px !important;

                      --primary-text-color: rgb(var(--my-grey));
        - type: entities
          entities:
            - type: divider
          card_mod:
            style: |
              ha-card {
                background-color: transparent;
                border: transparent;
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              entity: calendar.rte_tempo_calendrier
              tap_action:
                action: more-info
              primary: ''
              secondary: ''
              icon: |-
                {% if is_state('sensor.rte_tempo_couleur_actuelle', 'Bleu') %}
                mdi:leaf
                {% endif %}
                {% if is_state('sensor.rte_tempo_couleur_actuelle', 'Blanc') %}
                mdi:lightning-bolt
                {% endif %}
                {% if is_state('sensor.rte_tempo_couleur_actuelle', 'Rouge') %}
                mdi:alert
                {% endif %}
              icon_color: |-
                {% if is_state('sensor.rte_tempo_couleur_actuelle', 'Bleu') %}
                blue
                {% endif %}
                {% if is_state('sensor.rte_tempo_couleur_actuelle', 'Blanc') %}
                grey
                {% endif %}
                {% if is_state('sensor.rte_tempo_couleur_actuelle', 'Rouge') %}
                red
                {% endif %}
              badge_color: |-
                {% if is_state('sensor.rte_tempo_prochaine_couleur', 'Bleu') %}
                blue
                {% endif %}
                {% if is_state('sensor.rte_tempo_prochaine_couleur', 'Blanc') %}
                grey
                {% endif %}
                {% if is_state('sensor.rte_tempo_prochaine_couleur', 'Rouge') %}
                red
                {% endif %}
              badge_icon: mdi:lightning-bolt
              multiline_secondary: true
              layout: vertical
              card_mod:
                style: |
                  ha-card {
                  background-color: transparent;
                  border: transparent;
                  margin-top: -15px !important;
                  margin-bottom: -20px !important;
                    --primary-text-color: rgb(var(--my-grey));
            - type: conditional
              conditions:
                - entity: switch.bouclage
                  state: 'on'
              card:
                type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                tap_action:
                  action: none
                icon: mdi:sync
                icon_color: orange
                layout: vertical
                card_mod:
                  style: |
                    ha-card {
                    background-color: transparent;
                    border: transparent;
                    margin-top: -15px !important;
                    margin-bottom: -20px !important;
                      --primary-text-color: rgb(var(--my-grey));
            - type: conditional
              conditions:
                - entity: switch.groupesechesserviettes
                  state: 'on'
              card:
                type: custom:mushroom-template-card
                primary: ''
                secondary: ''
                icon: |-
                  {% if is_state('switch.groupesechesserviettes','on') %}  
                  mdi:heating-coil
                  {% endif %}
                icon_color: orange
                badge_icon: >-
                  {% if ((is_state('switch.sdbetageradiateur','on')) and
                  (is_state('switch.salledebainrdcchauffage_2','on'))) %}  

                  mdi:numeric-2-box-multiple

                  {% endif %}
                badge_color: orange
                layout: vertical
                card_mod:
                  style: |
                    ha-card {
                    background-color: transparent;
                    border: transparent;
                    margin-top: -15px !important;
                    margin-bottom: -20px !important;
                      --primary-text-color: rgb(var(--my-grey));
                tap_action:
                  action: none
        - type: entities
          entities:
            - type: divider
          card_mod:
            style: |
              ha-card {
                background-color: transparent;
                border: transparent;
        - type: horizontal-stack
          cards:
            - type: custom:mushroom-template-card
              primary: Mokka
              icon: |-
                {% set state = states('sensor.mokka_battery_level') %}
                {% if  state | float >= 66 %}
                mdi:battery-high
                {% endif %}
                {% if  state | float >= 33 and state | float < 66 %}
                mdi:battery-medium
                {% endif %}
                {% if  state | float < 33%}
                mdi:battery-low
                {% endif %}
              icon_color: |-
                {% set state = states('sensor.mokka_battery_level') %}
                {% if  state | float >= 66 %}
                green
                {% endif %}
                {% if  state | float >= 33 and state | float < 66 %}
                orange
                {% endif %}
                {% if  state | float < 33%}
                red
                {% endif %}
              badge_icon: |-
                {% if is_state('sensor.mokka_charging_status', 'InProgress') %}
                mdi:ev-station
                {% else %}
                mdi:power-plug-off
                {% endif %}
              badge_color: |-
                {% if is_state('sensor.mokka_charging_status', 'InProgress') %}
                 orange
                {% else %}
                 grey
                {% endif %}
              secondary: |-

                {{ states('sensor.mokka_battery_level')|round(0)}}%
              layout: vertical
              card_mod:
                style: |
                  ha-card {
                  background-color: transparent;
                  margin-top: -10px !important;
                  margin-bottom: -20px !important;
                  border: transparent;
                    --primary-text-color: rgb(grey);
            - type: custom:mushroom-template-card
              primary: Tesla
              secondary: |-
                {% if is_state('binary_sensor.charging', 'off') %}
                {{ states('sensor.battery')}}%
                {% endif %}
                {% if is_state('binary_sensor.charging', 'on') %}
                {{ states('sensor.battery')}}%
                {% endif %}
              icon: |-
                {% set state = states('sensor.battery') %}
                {% if  state | float >= 66 %}
                 mdi:battery-high
                {% endif %}
                {% if  state | float >= 33 and state | float < 66 %}
                mdi:battery-medium
                {% endif %}
                {% if  state | float < 33%}
                mdi:battery-low
                {% endif %}
              icon_color: |-
                {% set state = states('sensor.battery') %}
                {% if  state | float >= 66 %}
                green
                {% endif %}
                {% if  state | float >= 33 and state | float < 66 %}
                orange
                {% endif %}
                {% if  state | float < 33%}
                red
                {% endif %}
              badge_icon: |-
                {% if is_state('binary_sensor.charging', 'off') %}
                mdi:power-plug-off
                {% endif %}
                {% if is_state('binary_sensor.charging', 'on') %}
                mdi:ev-station
                {% endif %}
              badge_color: |-
                {% if is_state('binary_sensor.charging', 'off') %}
                 grey
                {% endif %}
                {% if is_state('binary_sensor.charging', 'on') %}
                 orange
                {% endif %}
              layout: vertical
              card_mod:
                style: |
                  ha-card {
                  background-color: transparent;
                  margin-top: -10px !important;
                  margin-bottom: -20px !important;                 
                  border: transparent;
                    --primary-text-color: rgb(grey);
        - type: entities
          entities:
            - type: divider
          card_mod:
            style: |
              ha-card {
                background-color: transparent;
                border: transparent;
        - type: grid
          columns: 3
          square: false
          cards:
            - type: custom:mushroom-template-card
              tap_action:
                action: more-info
              primary: ''
              secondary: ''
              card_mod:
                style: |
                  ha-card {
                    background-color: transparent;
                    border: transparent;

                    height:50px !important;
              icon: |-
                {% if is_state('group.fenetresmaison', 'off') %}
                mdi:window-closed-variant
                {% endif %}
                {% if is_state('group.fenetresmaison', 'on') %}
                mdi:window-open-variant
                {% endif %}
              entity: group.fenetresmaison
              icon_color: |-
                {% if is_state('group.fenetresmaison', 'off') %}
                 green
                {% endif %}
                {% if is_state('group.fenetresmaison', 'on') %}
                 red
                {% endif %}
            - type: custom:mushroom-template-card
              primary: ''
              secondary: ''
              icon: |-
                {% if
                is_state('binary_sensor.door_window_sensor_158d0001de8a5c',
                'off') and  is_state('binary_sensor.verrousoussol', 'on') %}
                mdi:garage-variant
                {% endif %}


                {% if
                is_state('binary_sensor.door_window_sensor_158d0001de8a5c',
                'off') and  is_state('binary_sensor.verrousoussol', 'off')
                %}
                mdi:garage-variant-lock
                {% endif %}


                {% if
                is_state('binary_sensor.door_window_sensor_158d0001de8a5c',
                'on')  %}
                mdi:garage-open-variant
                {% endif %}
              icon_color: |-
                {% if
                is_state('binary_sensor.door_window_sensor_158d0001de8a5c',
                'off') and  is_state('binary_sensor.verrousoussol', 'on') %}
                orange
                {% endif %}


                {% if
                is_state('binary_sensor.door_window_sensor_158d0001de8a5c',
                'off') and  is_state('binary_sensor.verrousoussol', 'off')
                %}
                green
                {% endif %}


                {% if
                is_state('binary_sensor.door_window_sensor_158d0001de8a5c',
                'on')  %}
                red
                {% endif %}
              badge_icon: |-
                {% if is_state('binary_sensor.verrousoussol', 'off') %}
                mdi:lock
                {% endif %}
                {% if is_state('binary_sensor.verrousoussol', 'on') %}
                mdi:lock-alert
                {% endif %}
              badge_color: |-
                {% if is_state('binary_sensor.verrousoussol', 'off') %}
                green
                {% endif %}
                {% if is_state('binary_sensor.verrousoussol', 'on') %}
                 red
                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    background-color: transparent;
                    border: transparent;
                    height:50px !important;
            - type: custom:mushroom-template-card
              tap_action:
                action: none
              primary: ''
              secondary: ''
              icon: |
                {% if is_state('binary_sensor.ouvertureportail', 'off') %}
                mdi:gate
                {% endif %}

                {% if is_state('binary_sensor.ouvertureportail', 'on')  %}
                mdi:gate-open
                {% endif %}
              icon_color: |-
                {% if is_state('binary_sensor.ouvertureportail', 'off') %}
                green
                {% endif %}

                {% if is_state('binary_sensor.ouvertureportail', 'on')  %}
                red
                {% endif %}
              card_mod:
                style: |
                  ha-card {
                    background-color: transparent;
                    border: transparent;
                    height:50px !important;
  style: |
    :host {
        --sidebar-background: var(--primary-background-color);
        --sidebar-text-color: rgb(var(--my-grey),1);
        --face-border-color: #FFF;
        --clock-hands-color: #000;
        --clock-seconds-hand-color: #FF4B3E;
        --clock-middle-background: #333;
        --clock-middle-border: #000;
        box-shadow: var(--sidebar-shadow);  
    }

    .sidebarMenu li {
        position: relative;
        padding: 10px 20px;
        border-radius: 12px;
        font-size: 20px !important;
        text-transform: lowercase !important;
        letter-spacing: 0.2em !important;
        line-height: 32px !important;
        font-weight: 500;
        white-space: normal;
        display: block;
        cursor: pointer;
    }

    .digitalClock {
        color: rgb(var(--my-grey),1);
        text-align: center;
        padding-bottom: 1px;
        padding-top: 20px;
        font-size: 220px;
        line-height: 30px!important;
        font-weight: 700;
        letter-spacing: 5px;
    }
    .date {
        color: rgb(var(--my-grey),1);
        text-align: center;
        font-size: 17px;
    }
    .bottom {
        display: grid!important;
    }
views:
  - title: home
    path: home
    theme: Soft UI
    type: custom:grid-layout
    layout:
      grid-template-columns: 20px 550px 35px 480px 35px 550px 20px
      grid-template-rows: 50px auto 50px
      gap: 0px 0px;
      grid-auto-flow: row
      grid-template-areas: |
        ". . . . . . ." ". cg . cm . cd ."  ". . . . . . ."
    icon: mdi:home
    badges: []
    cards:
      - type: grid
        columns: 1
        square: false
        cards:
          - type: grid
            square: false
            columns: 1
            cards:
              - type: custom:button-card
                name: météo
                template: titre
              - type: custom:button-card
                template: frame
                padding-bottom: 1px
                custom_fields:
                  buttons:
                    card:
                      type: custom:layout-card
                      layout_type: custom:grid-layout
                      cards:
                        - type: custom:mini-graph-card
                          color_thresholds:
                            - color: rgb(var(--my-blue)
                              value: 0
                            - color: rgb(var(--my-blue)
                              value: 10
                            - color: rgb(var(--my-green)
                              value: 19
                            - color: rgb(var(--my-orange)
                              value: 25
                            - color: rgb(var(--my-red)
                              value: 30
                          color_thresholds_transition: smooth
                          entities:
                            - sensor.gw1100a_v2_2_5_outdoor_temperature
                          group: false
                          hour24: true
                          hours_to_show: 24
                          line_width: 4
                          name: Extérieur
                          points_per_hour: 4
                          show:
                            extrema: true
                            fill: fade
                            icon: false
                            labels: false
                            name: false
                            state: true
                          tap_action:
                            action: none
                          view_layout: null
                          grid-area: temp
                          card_mod:
                            style: |
                              ha-card {
                              background-color: transparent;
                              border: transparent;
                        - type: custom:weather-card
                          entity: weather.beynes
                          number_of_forecasts: '5'
                          hourly_forecast: false
                          details: false
                          forecast: true
                          current: false
                          view_layout:
                            grid-area: meteo
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: grid
                          columns: 2
                          square: false
                          cards:
                            - type: custom:mushroom-template-card
                              primary: '{{states(''sensor.sm300d2_co2_value'')}}ppm'
                              icon: mdi:molecule-co2
                              icon_color: >
                                {% set state =
                                states('sensor.sm300d2_co2_value') %}

                                {% if  state | float <= 800 %}
                                 green
                                {% endif %}

                                {% if  state | float > 800 and state | float <=
                                1000%}
                                 orange
                                {% endif %}

                                {% if  state | float > 1000 %}
                                 red
                                {% endif %}
                              multiline_secondary: true
                              layout: vertical
                              card_mod:
                                style: |
                                  ha-card {
                                  background-color: transparent;
                                  border: transparent;
                                    --primary-text-color: rgb(var(--my-grey)
                            - type: custom:mushroom-template-card
                              primary: >-
                                {{states('sensor.sm300d2_formaldehyde_value')}}µg/m³
                              icon: mdi:flask
                              icon_color: >
                                {% set state =
                                states('sensor.sm300d2_formaldehyde_value') %}

                                {% if  state | float <= 50 %}
                                 green
                                {% endif %}

                                {% if  state | float > 50 and state | float <=
                                55 %}
                                 orange
                                {% endif %}

                                {% if  state | float > 55 %}
                                 red
                                {% endif %}
                              multiline_secondary: true
                              layout: vertical
                              card_mod:
                                style: |
                                  ha-card {
                                  background-color: transparent;
                                  border: transparent;
                                    --primary-text-color: rgb(var(--my-grey)
                            - type: custom:mushroom-template-card
                              primary: '{{states(''sensor.sm300d2_pm10_value'')}}µg/m³'
                              icon: mdi:chart-bubble
                              icon_color: >
                                {% set state =
                                states('sensor.sm300d2_pm10_value') %}

                                {% if  state | float <= 50 %}
                                 green
                                {% endif %}

                                {% if  state | float > 50 and state | float <=
                                55%}
                                 orange
                                {% endif %}

                                {% if  state | float > 55 %}
                                 red
                                {% endif %}
                              multiline_secondary: true
                              layout: vertical
                              card_mod:
                                style: |
                                  ha-card {
                                  background-color: transparent;
                                  border: transparent;
                                    --primary-text-color: rgb(var(--my-grey)
                            - type: custom:mushroom-template-card
                              primary: '{{states(''sensor.sm300d2_pm2_5_value'')}}µg/m³'
                              icon: mdi:blur
                              icon_color: >
                                {% set state =
                                states('sensor.sm300d2_pm2_5_value') %}

                                {% if  state | float < 25%}
                                 green
                                {% endif %}

                                {% if  state | float >= 25 and state | float <=
                                27%}
                                 orange
                                {% endif %}

                                {% if  state | float > 27 %}
                                 red
                                {% endif %}
                              multiline_secondary: true
                              layout: vertical
                              card_mod:
                                style: |
                                  ha-card {
                                  background-color: transparent;
                                  border: transparent;
                                    --primary-text-color: rgb(var(--my-grey)
                          view_layout:
                            grid-area: aqi
                      layout:
                        grid-template-columns: 1fr 0.75fr
                        grid-auto-flow: row
                        grid-template-areas: |
                          "temp aqi"
                          "meteo meteo"
                card_mod:
                  class: soft-ui
                  style: |
                    ha-card {
                      --primary-text-color: rgb(var(--my-grey));   
                    }
          - type: grid
            square: false
            columns: 1
            cards:
              - type: custom:button-card
                name: températures
                template: titre
              - type: custom:button-card
                template: frame
                padding-bottom: 1px
                custom_fields:
                  buttons:
                    card:
                      square: false
                      type: grid
                      columns: 4
                      cards:
                        - type: custom:mushroom-template-card
                          primary: >-
                            {{float(states('sensor.chambrenatibou_capteurtemperature_temperature')|round(1))}}°C
                          icon: mdi:bed-king
                          icon_color: >
                            {% set state =
                            states('sensor.chambrenatibou_capteurtemperature_temperature')
                            %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Natibou
                          tap_action:
                            action: more-info
                          entity: sensor.chambrenatibou_capteurtemperature_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturenatibou') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturenatibou') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: '{{states(''sensor.faustine_temperature'')}}°C'
                          icon: mdi:face-woman
                          icon_color: >
                            {% set state = states('sensor.faustine_temperature')
                            %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Faustine
                          tap_action:
                            action: more-info
                          entity: sensor.faustine_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturefaustine') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturefaustine') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: '{{states(''sensor.theodore_temperature'')}}°C'
                          icon: mdi:face-man
                          icon_color: >
                            {% set state = states('sensor.theodore_temperature')
                            %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Théodore
                          tap_action:
                            action: more-info
                          entity: sensor.theodore_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturetheodore') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturetheodore') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: >-
                            {{states('sensor.etage_capteursonoff_temperature')|round(1)}}°C
                          icon: mdi:home-floor-1
                          icon_color: >
                            {% set state =
                            states('sensor.etage_capteursonoff_temperature') %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Etage
                          tap_action:
                            action: more-info
                          entity: sensor.etage_capteursonoff_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperatureetage') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperatureetage') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: '{{states(''sensor.sejour_temperature'')}}°C'
                          icon: mdi:silverware
                          icon_color: >
                            {% set state = states('sensor.sejour_temperature')
                            %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Séjour
                          tap_action:
                            action: more-info
                          entity: sensor.sejour_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturesejour') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturesejour') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: '{{states(''sensor.cuisine_temperature'')}}°C'
                          icon: mdi:stove
                          icon_color: >
                            {% set state = states('sensor.cuisine_temperature')
                            %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Cuisine
                          tap_action:
                            action: more-info
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturesejour') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturesejour') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: '{{states(''sensor.bureautibou_temperature'')}}°C'
                          icon: mdi:desk
                          icon_color: >
                            {% set state =
                            states('sensor.bureautibou_temperature') %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: Bureau
                          tap_action:
                            action: more-info
                          entity: sensor.sejour_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturebureau') %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturebureau') %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                        - type: custom:mushroom-template-card
                          primary: >-
                            {{states('sensor.bureaunathieu_temperature_temperature')|round(1)}}°C
                          icon: mdi:toy-brick
                          icon_color: >
                            {% set state =
                            states('sensor.bureaunathieu_temperature_temperature')
                            %}

                            {% if  state | float <= 17 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float > 17 and state | float <= 25%}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float > 25 %}
                             var(--my-red)
                            {% endif %}
                          multiline_secondary: true
                          layout: vertical
                          secondary: g0m Cave
                          tap_action:
                            action: more-info
                          entity: sensor.bureaunathieu_temperature_temperature
                          badge_icon: >-
                            {% set state =
                            states('sensor.derivativetemperaturebureaunathieu')
                            %}

                            {% if  state | float < 0 %}
                             mdi:arrow-bottom-right-thick
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             mdi:arrow-right-bold
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             mdi:arrow-top-right-thick
                            {% endif %}
                          badge_color: >-
                            {% set state =
                            states('sensor.derivativetemperaturebureaunathieu')
                            %}

                            {% if  state | float < 0 %}
                             var(--my-blue)
                            {% endif %}

                            {% if  state | float >= 0 and state | float < 0.01
                            %}
                             var(--my-green)
                            {% endif %}

                            {% if  state | float >= 0.01 %}
                             var(--my-orange)
                            {% endif %}
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                card_mod:
                  class: soft-ui
                  style: |
                    ha-card {
                      --primary-text-color: rgb(var(--my-grey));   
                    }
        view_layout:
          grid-area: cm
      - type: grid
        columns: 1
        square: false
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: énergie
                template: titre
              - type: custom:button-card
                template: frame
                padding-bottom: 1px
                custom_fields:
                  buttons:
                    card:
                      type: grid
                      columns: 2
                      square: false
                      cards:
                        - type: custom:flex-horseshoe-card
                          entities:
                            - entity: sensor.energy_total_daily
                              decimals: 0
                              name: électricité
                              unit: kWh
                              tap_action:
                                action: navigate
                                navigation_path: /dashboard-cuisine/consos
                            - entity: >-
                                sensor.home_energy_meter_gen5_electric_consumed_w
                              decimals: 0
                              unit: W
                              icon: mdi:home
                              tap_action:
                                action: navigate
                                navigation_path: /dashboard-cuisine/consos
                            - entity: >-
                                sensor.salleserveurswitchborneev_electric_consumed_w
                              attribute: pressure
                              decimals: 0
                              unit: W
                              icon: mdi:ev-plug-type2
                              tap_action:
                                action: navigate
                                navigation_path: /dashboard-cuisine/consos
                          show:
                            horseshoe_style: lineargradient
                          layout:
                            hlines:
                              - id: 0
                                xpos: 50
                                ypos: 42
                                length: 40
                                styles:
                                  - stroke: var(--primary-text-color);
                                  - stroke-width: 5;
                                  - stroke-linecap: round;
                                  - opacity: 0.7;
                            states:
                              - id: 0
                                entity_index: 0
                                xpos: 50
                                ypos: 34
                                styles:
                                  - font-size: 3em;
                              - id: 1
                                entity_index: 1
                                xpos: 40
                                ypos: 57
                                styles:
                                  - text-anchor: start;
                                  - font-size: 1.5em;
                              - id: 2
                                entity_index: 2
                                xpos: 40
                                ypos: 72
                                styles:
                                  - text-anchor: start;
                                  - font-size: 1.5em;
                            icons:
                              - id: 0
                                entity_index: 1
                                xpos: 37
                                ypos: 57
                                align: end
                                size: 1.3
                              - id: 1
                                entity_index: 2
                                xpos: 37
                                ypos: 72
                                align: end
                                size: 1.3
                            names:
                              - id: 0
                                entity_index: 0
                                xpos: 50
                                ypos: 90
                                styles:
                                  - font-size: 1.2em;
                                  - opacity: 0.7;
                                  - letter-spacing: 0.4em;
                                  - text-transform: lowercase
                          horseshoe_scale:
                            min: 0
                            max: 80
                            color: rgba(var(--my-grey2),0.7)
                          color_stops:
                            '1': rgba(var(--my-green),0.7)
                            '2': rgba(var(--my-orange),0.7)
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                                --primary-text-color: rgb(var(--my-grey)
                        - type: custom:flex-horseshoe-card
                          entities:
                            - entity: sensor.compteur_eau_litres
                              decimals: 0
                              name: eau
                              unit: L
                              tap_action:
                                action: navigate
                                navigation_path: /dashboard-cuisine/consos
                            - entity: sensor.water_pulse_meter
                              decimals: 1
                              unit: L/min
                              icon: mdi:water-pump
                              tap_action:
                                action: navigate
                                navigation_path: /dashboard-cuisine/consos
                            - entity: sensor.etat_reservoir
                              decimals: 0
                              unit: null
                              icon: mdi:car-coolant-level
                              tap_action:
                                action: navigate
                                navigation_path: /dashboard-cuisine/consos
                          show:
                            horseshoe_style: lineargradient
                          layout:
                            hlines:
                              - id: 0
                                xpos: 50
                                ypos: 42
                                length: 40
                                styles:
                                  - stroke: var(--primary-text-color);
                                  - stroke-width: 5;
                                  - stroke-linecap: round;
                                  - opacity: 0.7;
                            states:
                              - id: 0
                                entity_index: 0
                                xpos: 50
                                ypos: 34
                                styles:
                                  - font-size: 3em;
                              - id: 1
                                entity_index: 1
                                xpos: 40
                                ypos: 57
                                styles:
                                  - text-anchor: start;
                                  - font-size: 1.5em;
                              - id: 2
                                entity_index: 2
                                xpos: 40
                                ypos: 72
                                styles:
                                  - text-anchor: start;
                                  - font-size: 1.5em;
                            icons:
                              - id: 0
                                entity_index: 1
                                xpos: 37
                                ypos: 57
                                align: end
                                size: 1.3
                              - id: 1
                                entity_index: 2
                                xpos: 37
                                ypos: 72
                                align: end
                                size: 1.3
                            names:
                              - id: 0
                                entity_index: 0
                                xpos: 50
                                ypos: 90
                                styles:
                                  - font-size: 1.2em;
                                  - opacity: 0.7;
                                  - letter-spacing: 0.4em;
                                  - text-transform: lowercase
                          horseshoe_scale:
                            min: 0
                            max: 400
                            color: rgba(var(--my-grey2),0.7)
                          color_stops:
                            '16': rgba(var(--my-blue),0.7)
                            '25': rgba(var(--my-red),0.7)
                          card_mod:
                            style: |
                              ha-card {
                                background-color: transparent;
                                border: transparent;
                                --primary-text-color: rgb(var(--my-grey)
                card_mod:
                  class: soft-ui
                  style: |
                    ha-card {
                      --primary-text-color: rgb(var(--my-grey));   
                    }
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:button-card
                name: lampes
                template: titre
              - square: false
                type: grid
                cards:
                  - type: custom:button-card
                    template: light
                    entity: switch.degagement_lampemurphy
                    icon: mdi:wardrobe
                    name: murphy
                  - type: custom:button-card
                    template: light
                    entity: group.lumiereambiance
                    icon: mdi:lamps
                    name: ambiance
                  - type: custom:button-card
                    template: light
                    entity: group.lumierejardin
                    name: jardin
                    icon: mdi:grass
                  - type: custom:button-card
                    template: light
                    entity: group.touteslumieres
                    icon: mdi:lightbulb-group
                    name: autres
                    tap_action:
                      action: more-info
                    styles:
                      grid:
                        - position: relative
                      custom_fields:
                        notification:
                          - background-color: |
                              [[[
                                if (states['sensor.nbrelumieresallumees'].state > 0)
                                  return 'rgb(var(--my-orange))';
                                return "transparent";
                              ]]]
                          - border-radius: 50%
                          - position: absolute
                          - left: 50%
                          - top: 10%
                          - height: 20px
                          - width: 20px
                          - font-size: 11px
                          - font-weight: bold
                          - line-height: 20px
                          - color: rgb(var(--my-grey))
                    custom_fields:
                      notification: |

                        [[[
                          if (states['sensor.nbrelumieresallumees'].state > 0)
                            return Math.floor(states['sensor.nbrelumieresallumees'].state) ;
                          return "";
                        ]]]
                columns: 4
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:button-card
                name: appareils
                template: titre
              - square: false
                type: grid
                cards:
                  - type: custom:button-card
                    name: 2h rdc
                    template: light
                    entity: input_boolean.max2h
                    icon: mdi:timer-refresh
                  - type: custom:button-card
                    name: 2h étage
                    template: light
                    entity: input_boolean.max2hetage
                    icon: mdi:timer-refresh
                  - type: custom:button-card
                    triggers_update: all
                    template: aspirateur
                    entity: vacuum.roborock_s7
                    icon: mdi:robot-vacuum
                    name: droides
                  - type: custom:button-card
                    triggers_update: all
                    template: light
                    size: 28%
                    entity: switch.salleserveurswitchborneev
                    icon: phu:charging-station
                    name: borne ev
                    styles:
                      icon:
                        - padding-left: 5px
                      grid:
                        - position: relative
                      custom_fields:
                        notification:
                          - background-color: ''
                          - border-radius: 50%
                          - position: absolute
                          - left: 50%
                          - top: 10%
                          - height: 30px
                          - width: 30px
                          - font-size: 11px
                          - font-weight: bold
                          - line-height: 20px
                          - color: rgb(var(--my-grey))
                    custom_fields:
                      notification: |

                        [[[
                          if (states['sensor.salleserveurswitchborneev_electric_consumed_w'].state > 5000)
                          return `<ha-icon
                            icon="mdi:lightning-bolt"
                            style="width: 24px; height: 24px; color: rgb(var(--my-orange));">
                            </ha-icon>`
                        ]]]
                  - type: custom:button-card
                    triggers_update: all
                    template: light
                    entity: input_boolean.arrosageauto
                    icon: mdi:sprinkler
                    name: arrosage
                    styles:
                      grid:
                        - position: relative
                      custom_fields:
                        notification:
                          - background-color: ''
                          - border-radius: 50%
                          - position: absolute
                          - left: 50%
                          - top: 10%
                          - height: 30px
                          - width: 30px
                          - font-size: 11px
                          - font-weight: bold
                          - line-height: 20px
                          - color: rgb(var(--my-grey))
                    custom_fields:
                      notification: |

                        [[[
                          if (states['switch.jardin_pompearrosage'].state =='on' && entity.state == 'off')
                          return `<ha-icon
                            icon="mdi:water-pump"
                            style="width: 25px; height: 25px; color: rgb(var(--my-red));">
                            </ha-icon>`
                          if (states['switch.jardin_pompearrosage'].state =='on' && entity.state == 'on')
                          return `<ha-icon
                            icon="mdi:water-pump"
                            style="width: 25px; height: 25px; color: rgb(var(--my-orange));">
                            </ha-icon>`
                        ]]]
                  - type: custom:button-card
                    triggers_update: all
                    template: light
                    entity: switch.octopi_2
                    icon: phu:3dprinter-printing
                    name: octopi
                    styles:
                      icon:
                        - padding-left: 5px
                      grid:
                        - position: relative
                      custom_fields:
                        notification:
                          - background-color: ''
                          - border-radius: 50%
                          - position: absolute
                          - left: 50%
                          - top: 10%
                          - height: 30px
                          - width: 30px
                          - font-size: 11px
                          - font-weight: bold
                          - line-height: 20px
                          - color: rgb(var(--my-grey))
                    custom_fields:
                      notification: |

                        [[[
                          if (states['sensor.salleserveuroctoprint_print_status'].state == 'Printing')
                          return `<ha-icon
                            icon="mdi:printer-3d-nozzle"
                            style="width: 24px; height: 24px; color: rgb(var(--my-orange));">
                            </ha-icon>`
                        ]]]
                  - type: custom:button-card
                    triggers_update: all
                    template: light
                    entity: input_boolean.collectepluie
                    icon: mdi:car-coolant-level
                    name: collecte
                columns: 4
        view_layout:
          grid-area: cd
      - type: grid
        columns: 1
        square: false
        cards:
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:button-card
                name: alarme
                template: titre
              - type: custom:mushroom-alarm-control-panel-card
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .container {
                       text-transform: lowercase;
                       letter-spacing: 0.4em;
                       --secondary-text-color: rgba(var(--my-grey),0.8);
                       --card-secondary-font-size: 20px;
                       --card-primary-font-size: 20px;
                      flex-direction: row !important;
                      align-items: baseline;
                      gap: 10px;

                      }
                    mushroom-button:nth-child(1):
                      $: |
                        .button {
                          box-shadow: var(--my-card-shadow);
                          --bg-color: var(--primary-background-color);
                          --control-icon-size: 30px;
                          width: 120px !important;
                          height: 50px !important;                          
                          }
                        ha-icon {
                          --card-mod-icon-color: rgba(var(--my-blue),1);
                        }
                    mushroom-button:nth-child(2):
                      $: |
                        .button {
                          box-shadow: var(--my-card-shadow);
                          --bg-color: var(--primary-background-color);
                          --control-icon-size: 30px;
                          width: 120px !important;
                          height: 50px !important;                          
                          margin-left: -45px !important;
                          }
                        ha-icon {
                          --card-mod-icon-color: rgba(var(--my-blue),1);
                        }
                    mushroom-button:nth-child(3):
                      $: |
                        .button {
                          box-shadow: var(--my-card-shadow);
                          --bg-color: var(--primary-background-color);
                          --control-icon-size: 30px;
                          width: 120px !important;
                          height: 50px !important;
                          margin-left: -90px !important;
                          }
                        ha-icon {
                          --card-mod-icon-color: rgba(var(--my-blue),1);
                        }
                    .: |
                      ha-card {
                        background-color: transparent;
                        border: transparent;
                        padding-left: 0px !important;
                      }

                      ha-state-icon {
                        color: rgb(var(my-blue));
                      }
                entity: alarm_control_panel.maison
                states:
                  - armed_night
                  - armed_home
                  - armed_custom_bypass
                primary_info: none
                show_keypad: false
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:button-card
                name: portail
                template: titre
              - square: false
                type: grid
                cards:
                  - entity: binary_sensor.ouvertureportail
                    template: portail
                    name: portail
                    icon: mdi:gate
                    tap_action:
                      action: call-service
                      service: switch.turn_on
                      target:
                        entity_id: switch.double_relay_switch_2x1_5kw_6
                      data: {}
                    show_state: true
                    type: custom:button-card
                  - entity: binary_sensor.ouvertureportail
                    icon: mdi:walk
                    name: piéton
                    template: button_single
                    tap_action:
                      action: call-service
                      service: switch.turn_on
                      target:
                        entity_id: switch.jardinportail_2
                      data: {}
                    show_state: true
                    type: custom:button-card
                  - entity: binary_sensor.ouvertureportail
                    icon: mdi:car
                    name: totale
                    template: button_single
                    tap_action:
                      action: call-service
                      service: switch.turn_on
                      target:
                        entity_id: switch.jardinportail
                      data: {}
                    show_state: true
                    type: custom:button-card
                columns: 4
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:button-card
                name: volets
                template: titre
                styles:
                  card:
                    - margin-bottom: '-20px'
              - type: custom:tabbed-card
                styles:
                  '--mdc-theme-primary': rgb(var(--my-blue))
                  '--mdc-tab-text-label-color-default': rgb(var(--my-grey))
                tabs:
                  - attributes:
                      stacked: true
                      label: maison
                      icon: mdi:home
                    card:
                      square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - square: false
                          type: grid
                          columns: 4
                          cards:
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-up
                              name: maison
                              state_display: ouvrir
                              entity: cover.voletsmaison
                              tap_action:
                                action: call-service
                                service: cover.open_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsmaison
                            - type: custom:button-card
                              entity: cover.voletsmaison
                              template: button_single
                              icon: mdi:stop
                              state_display: |
                                [[[
                                  var position = entity.attributes.current_position;
                                  return (position ? position : '0') + '%';
                                ]]]
                              name: maison
                              tap_action:
                                action: call-service
                                service: cover.stop_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsmaison
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-down
                              name: maison
                              state_display: fermer
                              tap_action:
                                action: call-service
                                service: cover.close_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsmaison
                  - attributes:
                      stacked: true
                      label: rdc
                      icon: mdi:home-floor-0
                    card:
                      square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - square: true
                          type: grid
                          columns: 4
                          cards:
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-up
                              name: rdc
                              state_display: ouvrir
                              entity: cover.voletsrdc
                              tap_action:
                                action: call-service
                                service: cover.open_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsrdc
                            - type: custom:button-card
                              entity: cover.voletsrdc
                              template: button_single
                              icon: mdi:stop
                              name: rdc
                              state_display: |
                                [[[
                                  var position = entity.attributes.current_position;
                                  return (position ? position : '0') + '%';
                                ]]]
                              tap_action:
                                action: call-service
                                service: cover.stop_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsrdc
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-down
                              name: rdc
                              state_display: fermer
                              tap_action:
                                action: call-service
                                service: cover.close_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsrdc
                  - attributes:
                      stacked: true
                      label: etage
                      icon: mdi:home-floor-1
                    card:
                      square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - square: true
                          type: grid
                          columns: 4
                          cards:
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-up
                              name: étage
                              state_display: ouvrir
                              entity: cover.voletsetage
                              tap_action:
                                action: call-service
                                service: cover.open_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsetage
                            - type: custom:button-card
                              entity: cover.voletsetage
                              template: button_single
                              icon: mdi:stop
                              name: étage
                              state_display: |
                                [[[
                                  var position = entity.attributes.current_position;
                                  return (position ? position : '0') + '%';
                                ]]]
                              tap_action:
                                action: call-service
                                service: cover.stop_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsetage
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-down
                              name: étage
                              state_display: fermer
                              tap_action:
                                action: call-service
                                service: cover.close_cover
                                data: {}
                                target:
                                  entity_id: cover.voletsetage
                  - attributes:
                      stacked: true
                      label: auto
                      icon: mdi:window-shutter-auto
                    card:
                      type: grid
                      square: false
                      columns: 1
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - type: grid
                          square: false
                          columns: 1
                          cards:
                            - type: grid
                              square: false
                              columns: 4
                              cards:
                                - entity: input_boolean.voletsautooff
                                  template: light
                                  icon: mdi:window-shutter-alert
                                  name: 'off'
                                  styles:
                                    icon:
                                      - color: rgb(var(--my-grey),0.8)
                                  tap_action:
                                    action: call-service
                                    service: input_number.set_value
                                    target:
                                      entity_id: input_number.slidervoletsauto
                                    data:
                                      value: 0
                                  state:
                                    - value: 'on'
                                      styles:
                                        icon:
                                          - color: rgb(var(--my-blue)
                                        card:
                                          - background-color: rgba(var(--my-blue),0.2)
                                          - box-shadow: var(--my-box-shadow)
                                  show_state: true
                                  type: custom:button-card
                                - entity: input_boolean.voletsautoombre
                                  icon: mdi:umbrella-beach
                                  name: ombre
                                  template: light
                                  styles:
                                    icon:
                                      - color: rgb(var(--my-grey),0.8)
                                  tap_action:
                                    action: call-service
                                    service: input_number.set_value
                                    target:
                                      entity_id: input_number.slidervoletsauto
                                    data:
                                      value: 25
                                  state:
                                    - value: 'on'
                                      styles:
                                        icon:
                                          - color: rgb(var(--my-blue)
                                        card:
                                          - background-color: rgba(var(--my-blue),0.2)
                                          - box-shadow: var(--my-box-shadow)
                                  show_state: true
                                  type: custom:button-card
                                - entity: input_boolean.voletsautomoyen
                                  icon: mdi:sun-angle
                                  name: moyen
                                  template: light
                                  styles:
                                    icon:
                                      - color: rgb(var(--my-grey),0.8)
                                  tap_action:
                                    action: call-service
                                    service: input_number.set_value
                                    target:
                                      entity_id: input_number.slidervoletsauto
                                    data:
                                      value: 50
                                  state:
                                    - value: 'on'
                                      styles:
                                        icon:
                                          - color: rgb(var(--my-blue)
                                        card:
                                          - background-color: rgba(var(--my-blue),0.2)
                                          - box-shadow: var(--my-box-shadow)
                                  show_state: true
                                  type: custom:button-card
                                - entity: input_boolean.voletsautolumiere
                                  icon: mdi:sun-wireless
                                  name: lumière
                                  template: light
                                  styles:
                                    icon:
                                      - color: rgb(var(--my-grey),0.8)
                                  tap_action:
                                    action: call-service
                                    service: input_number.set_value
                                    target:
                                      entity_id: input_number.slidervoletsauto
                                    data:
                                      value: 100
                                  state:
                                    - value: 'on'
                                      styles:
                                        icon:
                                          - color: rgb(var(--my-blue)
                                        card:
                                          - background-color: rgba(var(--my-blue),0.2)
                                          - box-shadow: var(--my-box-shadow)
                                  show_state: true
                                  type: custom:button-card
                  - attributes:
                      stacked: true
                      label: velux
                      icon: mdi:window-open
                    card:
                      square: false
                      type: grid
                      columns: 1
                      cards:
                        - type: custom:button-card
                          color_type: blank-card
                        - square: true
                          type: grid
                          columns: 4
                          cards:
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-up
                              name: velux
                              state_display: ouvrir
                              entity: cover.sejourvelux_roof_window
                              tap_action:
                                action: call-service
                                service: cover.open_cover
                                data: {}
                                target:
                                  entity_id: cover.sejourvelux_roof_window
                            - type: custom:button-card
                              entity: cover.sejourvelux_roof_window
                              template: button_single
                              icon: mdi:stop
                              name: velux
                              state_display: |
                                [[[
                                  var position = entity.attributes.current_position;
                                  return (position ? position : '0') + '%';
                                ]]]
                              tap_action:
                                action: call-service
                                service: cover.stop_cover
                                data: {}
                                target:
                                  entity_id: cover.sejourvelux_roof_window
                            - type: custom:button-card
                              template: button_single
                              icon: mdi:arrow-down
                              name: velux
                              state_display: fermer
                              tap_action:
                                action: call-service
                                service: cover.close_cover
                                data: {}
                                target:
                                  entity_id: cover.sejourvelux_roof_window
          - type: grid
            columns: 1
            square: false
            cards:
              - type: custom:button-card
                name: activités
                template: titre
              - square: false
                type: grid
                cards:
                  - entity: select.harmony_hub_3_activities
                    template: light
                    name: film
                    icon: mdi:movie
                    state_display: Désactivé
                    tap_action:
                      action: call-service
                      service: select.select_option
                      target:
                        entity_id: select.harmony_hub_3_activities
                      data:
                        option: Regarder un film
                    hold_action:
                      action: call-service
                      service: select.select_option
                      service_data:
                        option: power_off
                      target:
                        entity_id: select.harmony_hub_3_activities
                    styles:
                      icon:
                        - color: rgba(var(--my-grey),0.8)
                    state:
                      - value: Regarder un film
                        state_display: Activé
                        styles:
                          icon:
                            - color: rgb(var(--my-orange))
                          card:
                            - background-color: rgba(var(--my-orange),0.2)
                            - box-shadow: var(--my-box-shadow)
                    show_state: true
                    type: custom:button-card
                  - entity: select.harmony_hub_3_activities
                    template: light
                    name: PS5
                    icon: mdi:sony-playstation
                    state_display: Désactivé
                    tap_action:
                      action: call-service
                      service: select.select_option
                      target:
                        entity_id: select.harmony_hub_3_activities
                      data:
                        option: Jouer a la PS5
                    hold_action:
                      action: call-service
                      service: select.select_option
                      service_data:
                        option: power_off
                      target:
                        entity_id: select.harmony_hub_3_activities
                    styles:
                      icon:
                        - color: rgba(var(--my-grey),0.8)
                    state:
                      - value: Jouer a la PS5
                        state_display: Activé
                        styles:
                          icon:
                            - color: rgb(var(--my-orange))
                          card:
                            - background-color: rgba(var(--my-orange),0.2)
                            - box-shadow: var(--my-box-shadow)
                    show_state: true
                    type: custom:button-card
                  - entity: select.harmony_hub_3_activities
                    template: light
                    name: switch
                    icon: mdi:nintendo-switch
                    state_display: Désactivé
                    tap_action:
                      action: call-service
                      service: select.select_option
                      target:
                        entity_id: select.harmony_hub_3_activities
                      data:
                        option: Jouer a la Switch
                    hold_action:
                      action: call-service
                      service: select.select_option
                      service_data:
                        option: power_off
                      target:
                        entity_id: select.harmony_hub_3_activities
                    styles:
                      icon:
                        - color: rgba(var(--my-grey),0.8)
                    state:
                      - value: Jouer a la Switch
                        state_display: Activé
                        styles:
                          icon:
                            - color: rgb(var(--my-orange))
                          card:
                            - background-color: rgba(var(--my-orange),0.2)
                            - box-shadow: var(--my-box-shadow)
                    show_state: true
                    type: custom:button-card
                  - entity: select.harmony_hub_3_activities
                    template: light
                    name: chill
                    icon: mdi:music
                    state_display: Désactivé
                    tap_action:
                      action: call-service
                      service: select.select_option
                      target:
                        entity_id: select.harmony_hub_3_activities
                      data:
                        option: Chill
                    hold_action:
                      action: call-service
                      service: select.select_option
                      service_data:
                        option: power_off
                      target:
                        entity_id: select.harmony_hub_3_activities
                    styles:
                      icon:
                        - color: rgba(var(--my-grey),0.8)
                    state:
                      - value: Chill
                        state_display: Activé
                        styles:
                          icon:
                            - color: rgb(var(--my-orange))
                          card:
                            - background-color: rgba(var(--my-orange),0.2)
                            - box-shadow: var(--my-box-shadow)
                    show_state: true
                    type: custom:button-card
                columns: 4
        view_layout:
          grid-area: cg
      - type: custom:popup-card
        entity: calendar.rte_tempo_calendrier
        dismissable: false
        size: normal
        right_button: ok
        timeout: 60000
        title: t e m p o
        card:
          initial_view: listWeek
          type: calendar
          entities:
            - calendar.rte_tempo_calendrier
          theme: Soft UI
      - type: custom:popup-card
        entity: group.touteslumieres
        title: l u m i è r e s
        dismissable: false
        size: normal
        right_button: ok
        card:
          square: true
          type: grid
          cards:
            - type: custom:button-card
              icon: mdi:ceiling-fan-light
              entity: light.natibou_ventilateur
              name: natibou
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: light.wled_faustine
              icon: mdi:crown
              name: Poupée
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: light.wled_theodore
              icon: mdi:deathly-hallows
              name: Teddy
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              color_type: blank-card
            - type: custom:button-card
              entity: switch.double_relay_switch_2x1_5kw
              icon: mdi:sofa
              name: salon
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: light.bureautibou_ampoule
              icon: mdi:desk
              name: bureau
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: switch.cuisine_bandeau
              icon: mdi:stove
              name: cuisine
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: call-service
                service: light.toggle
                target:
                  entity_id: light.lumiere_sejour
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: group.lumieresoussol
              icon: mdi:tools
              name: sous-sol
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: input_boolean.rgbbureau
              icon: mdi:death-star-variant
              name: g0m cave
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: switch.salledejeulumiere
              icon: mdi:multimedia
              name: rec room
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: light.spots_kallax
              icon: mdi:library-shelves
              name: kallax
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:button-card
              entity: switch.salledejeurgb
              icon: mdi:led-strip-variant
              name: RGB
              size: 35%
              show_state: true
              tap_action:
                haptic: heavy
                action: toggle
              styles:
                icon:
                  - color: rgb(75,75,75,0.8)
                card:
                  - width: 120px
                  - height: 120px
                  - margin: auto
                  - border-style: none
                  - background-color: null
                  - box-shadow: >-
                      rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0,
                      0.3) 0px 8px 16px -8px
                grid:
                  - grid-template-areas: '"i" "n" "s"'
                  - grid-template-columns: 1fr
                  - grid-template-rows: 1fr min-content min-content
                img_cell:
                  - align-self: start
                  - text-align: start
                  - justify-content: start
                  - padding-left: 15px
                name:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - text-transform: lowercase
                  - letter-spacing: 0.2em
                  - font-size: 17px
                  - padding-bottom: 2px
                  - color: rgb(75,75,75,0.8)
                state:
                  - justify-self: start
                  - padding-left: 12px
                  - font-weight: bold
                  - font-size: 12px
                  - opacity: 0.6
                  - padding-bottom: 5px
                  - opacity: 0.6
              state:
                - value: 'on'
                  styles:
                    icon:
                      - color: rgb(251, 161, 0)
                    card:
                      - background-color: rgba(251, 161, 0,0.2)
                      - box-shadow: >-
                          rgba(50, 50, 93, 0.05) 0px 30px 60px -12px inset,
                          rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
          columns: 4
        theme: Soft UI
      - type: custom:popup-card
        entity: group.fenetresmaison
        dismissable: false
        title: o u v r a n t s
        right_button: ok
        timeout: 10000
        card:
          type: vertical-stack
          cards:
            - type: conditional
              conditions:
                - entity: group.fenetresmaison
                  state: 'on'
              card:
                type: conditional
                conditions:
                  - entity: group.fenetresmaison
                    state: 'on'
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:auto-entities
                      card:
                        type: glance
                        show_state: false
                      filter:
                        include:
                          - entity_id: binary_sensor.door_window_sensor_*
                            state: 'on'
                      sort:
                        method: name
                      card_mod:
                        style: |
                          ha-card {
                          background-color: transparent;
                          border: transparent;
            - type: conditional
              conditions:
                - entity: group.fenetresmaison
                  state_not: 'on'
              card:
                type: custom:mushroom-title-card
                title: Tout est fermé
                alignment: center
              card_mod:
                style: |
                  ha-card {
                  background-color: transparent;
                  border: transparent;
      - type: custom:popup-card
        entity: vacuum.roborock_s7
        dismissable: false
        size: normal
        right_button: ok
        timeout: 30000
        card:
          type: vertical-stack
          cards:
            - type: custom:button-card
              template: titre
              name: droides
            - type: horizontal-stack
              layout_type: custom:grid-layout
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:vacuum-card
                      entity: vacuum.roborock_s7
                      show_toolbar: false
                    - type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          icon: phu:roborock
                          entity: input_boolean.cleaningaspire
                          name: aspire
                          size: 35%
                          show_state: true
                          tap_action:
                            haptic: heavy
                            action: call-service
                            service: script.turn_on
                            data: {}
                            target:
                              entity_id: script.alfredaspire
                          styles:
                            icon:
                              - color: rgb(75,75,75,0.8)
                            card:
                              - width: 120px
                              - height: 120px
                              - margin: auto
                              - border-style: none
                              - background-color: null
                              - box-shadow: >-
                                  rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                                  rgba(0, 0, 0, 0.3) 0px 8px 16px -8px
                            grid:
                              - grid-template-areas: '"i" "n" "s"'
                              - grid-template-columns: 1fr
                              - grid-template-rows: 1fr min-content min-content
                            img_cell:
                              - align-self: start
                              - text-align: start
                              - justify-content: start
                              - padding-left: 15px
                            name:
                              - justify-self: start
                              - padding-left: 12px
                              - font-weight: bold
                              - text-transform: lowercase
                              - letter-spacing: 0.2em
                              - font-size: 17px
                              - padding-bottom: 2px
                              - color: rgb(75,75,75,0.8)
                            state:
                              - justify-self: start
                              - padding-left: 12px
                              - font-weight: bold
                              - font-size: 12px
                              - opacity: 0.6
                              - padding-bottom: 5px
                              - opacity: 0.6
                          state:
                            - value: 'on'
                              tap_action:
                                haptic: heavy
                                action: call-service
                                service: vacuum.return_to_base
                                data: {}
                                target:
                                  entity_id: vacuum.roborock_s7
                              styles:
                                icon:
                                  - color: rgb(251, 161, 0)
                                  - animation: rotating 2s ease infinite
                                card:
                                  - background-color: rgba(251, 161, 0,0.2)
                                  - box-shadow: >-
                                      rgba(50, 50, 93, 0.05) 0px 30px 60px -12px
                                      inset, rgba(0, 0, 0, 0.3) 0px 18px 36px
                                      -18px inset
                          card_mod:
                            class: soft-ui
                            style: |
                              ha-card {
                                --primary-text-color: rgb(var(--my-grey));   
                              }
                        - type: custom:button-card
                          icon: phu:roborock
                          entity: input_boolean.cleaningmop
                          name: custom
                          size: 35%
                          show_state: true
                          tap_action:
                            haptic: heavy
                            action: call-service
                            service: script.turn_on
                            data: {}
                            target:
                              entity_id: script.alfredmop
                          styles:
                            icon:
                              - color: rgb(75,75,75,0.8)
                            card:
                              - width: 120px
                              - height: 120px
                              - margin: auto
                              - border-style: none
                              - background-color: null
                              - box-shadow: >-
                                  rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                                  rgba(0, 0, 0, 0.3) 0px 8px 16px -8px
                            grid:
                              - grid-template-areas: '"i" "n" "s"'
                              - grid-template-columns: 1fr
                              - grid-template-rows: 1fr min-content min-content
                            img_cell:
                              - align-self: start
                              - text-align: start
                              - justify-content: start
                              - padding-left: 15px
                            name:
                              - justify-self: start
                              - padding-left: 12px
                              - font-weight: bold
                              - text-transform: lowercase
                              - letter-spacing: 0.2em
                              - font-size: 17px
                              - padding-bottom: 2px
                              - color: rgb(75,75,75,0.8)
                            state:
                              - justify-self: start
                              - padding-left: 12px
                              - font-weight: bold
                              - font-size: 12px
                              - opacity: 0.6
                              - padding-bottom: 5px
                              - opacity: 0.6
                          state:
                            - value: 'on'
                              tap_action:
                                haptic: heavy
                                action: call-service
                                service: vacuum.return_to_base
                                data: {}
                                target:
                                  entity_id: vacuum.roborock_s7
                              styles:
                                icon:
                                  - color: rgb(251, 161, 0)
                                  - animation: rotating 2s ease infinite
                                card:
                                  - background-color: rgba(251, 161, 0,0.2)
                                  - box-shadow: >-
                                      rgba(50, 50, 93, 0.05) 0px 30px 60px -12px
                                      inset, rgba(0, 0, 0, 0.3) 0px 18px 36px
                                      -18px inset
                          card_mod:
                            class: soft-ui
                            style: |
                              ha-card {
                                --primary-text-color: rgb(var(--my-grey));   
                              }
                  view_layout:
                    grid-area: alfred
                - type: conditional
                  conditions:
                    - entity: vacuum.roborock_s7
                      state_not: docked
                  card:
                    show_state: true
                    show_name: true
                    camera_view: live
                    type: picture-entity
                    entity: vacuum.nestor
                    camera_image: camera.roborock_s7_map
                  card_mod:
                    class: soft-ui
                    style: |
                      ha-card {
                        --primary-text-color: rgb(var(--my-grey));   
                      }
                - type: vertical-stack
                  cards:
                    - type: custom:vacuum-card
                      entity: vacuum.nestor
                      show_toolbar: false
                    - type: horizontal-stack
                      cards:
                        - type: custom:button-card
                          icon: mdi:robot-vacuum-variant
                          entity: vacuum.nestor
                          name: aspire
                          size: 35%
                          show_state: true
                          tap_action:
                            haptic: heavy
                            action: call-service
                            service: vacuum.start
                            data: {}
                            target:
                              entity_id: vacuum.nestor
                          styles:
                            icon:
                              - color: rgb(75,75,75,0.8)
                            card:
                              - width: 120px
                              - height: 120px
                              - margin: auto
                              - border-style: none
                              - background-color: null
                              - box-shadow: >-
                                  rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                                  rgba(0, 0, 0, 0.3) 0px 8px 16px -8px
                            grid:
                              - grid-template-areas: '"i" "n" "s"'
                              - grid-template-columns: 1fr
                              - grid-template-rows: 1fr min-content min-content
                            img_cell:
                              - align-self: start
                              - text-align: start
                              - justify-content: start
                              - padding-left: 15px
                            name:
                              - justify-self: start
                              - padding-left: 12px
                              - font-weight: bold
                              - text-transform: lowercase
                              - letter-spacing: 0.2em
                              - font-size: 17px
                              - padding-bottom: 2px
                              - color: rgb(75,75,75,0.8)
                            state:
                              - justify-self: start
                              - padding-left: 12px
                              - font-weight: bold
                              - font-size: 12px
                              - opacity: 0.6
                              - padding-bottom: 5px
                              - opacity: 0.6
                          state:
                            - value: cleaning
                              tap_action:
                                haptic: heavy
                                action: call-service
                                service: vacuum.return_to_base
                                data: {}
                                target:
                                  entity_id: vacuum.roborock_s7
                              styles:
                                icon:
                                  - color: rgb(251, 161, 0)
                                  - animation: rotating 2s ease infinite
                                card:
                                  - background-color: rgba(251, 161, 0,0.2)
                                  - box-shadow: >-
                                      rgba(50, 50, 93, 0.05) 0px 30px 60px -12px
                                      inset, rgba(0, 0, 0, 0.3) 0px 18px 36px
                                      -18px inset
                          card_mod:
                            class: soft-ui
                            style: |
                              ha-card {
                                --primary-text-color: rgb(var(--my-grey));   
                              }
                - type: conditional
                  conditions:
                    - entity: vacuum.nestor
                      state_not: docked
                  card:
                    show_state: true
                    show_name: true
                    camera_view: live
                    type: picture-entity
                    entity: vacuum.nestor
                    camera_image: camera.nestor_cleaning_map
                  card_mod:
                    class: soft-ui
                    style: |
                      ha-card {
                        --primary-text-color: rgb(var(--my-grey));   
                      }
              layout:
                grid-template-columns: 250px 300px 250px 300px
                grid-template-rows: 400px 200px
                grid-auto-flow: row
                grid-template-areas: |
                  "alfred  map nestor map2"
                  ". map . map2"
        view_layout:
          grid-area: heure
      - type: custom:popup-card
        title: t e m p é r a t u r e s
        dismissable: true
        card:
          type: grid
          columns: 4
          square: false
          cards:
            - type: custom:mini-graph-card
              name: n a t i b o u
              color_thresholds:
                - color: rgb(var(--my-blue)
                  value: 15
                - color: rgb(var(--my-green)
                  value: 19
                - color: rgb(var(--my-orange)
                  value: 27
                - color: rgb(var(--my-red)
                  value: 30
              color_thresholds_transition: smooth
              animate: true
              entities:
                - sensor.chambrenatibou_capteurtemperature_temperature
              group: false
              hour24: true
              line_width: 4
              points_per_hour: 4
              show:
                extrema: true
                fill: fade
                icon: false
                labels: false
                name: true
                state: true
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:mini-graph-card
              name: f a u s t i n e
              color_thresholds:
                - color: rgb(var(--my-blue)
                  value: 15
                - color: rgb(var(--my-green)
                  value: 19
                - color: rgb(var(--my-orange)
                  value: 27
                - color: rgb(var(--my-red)
                  value: 30
              color_thresholds_transition: smooth
              animate: true
              entities:
                - sensor.faustine_temperature
              group: false
              hour24: true
              line_width: 4
              points_per_hour: 4
              show:
                extrema: true
                fill: fade
                icon: false
                labels: false
                name: true
                state: true
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:mini-graph-card
              name: t h é o d o r e
              color_thresholds:
                - color: rgb(var(--my-blue)
                  value: 15
                - color: rgb(var(--my-green)
                  value: 19
                - color: rgb(var(--my-orange)
                  value: 27
                - color: rgb(var(--my-red)
                  value: 30
              color_thresholds_transition: smooth
              animate: true
              entities:
                - sensor.theodore_temperature
              group: false
              hour24: true
              line_width: 4
              points_per_hour: 4
              show:
                extrema: true
                fill: fade
                icon: false
                labels: false
                name: true
                state: true
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
            - type: custom:mini-graph-card
              name: é t a g e
              color_thresholds:
                - color: rgb(var(--my-blue)
                  value: 15
                - color: rgb(var(--my-green)
                  value: 19
                - color: rgb(var(--my-orange)
                  value: 27
                - color: rgb(var(--my-red)
                  value: 30
              color_thresholds_transition: smooth
              animate: true
              entities:
                - sensor.etage_capteursonoff_temperature
              group: false
              hour24: true
              line_width: 4
              points_per_hour: 4
              show:
                extrema: true
                fill: fade
                icon: false
                labels: false
                name: true
                state: true
              card_mod:
                class: soft-ui
                style: |
                  ha-card {
                    --primary-text-color: rgb(var(--my-grey));   
                  }
        entity: sensor.faustine_temperature
        size: fullscreen
  - title: recettes
    path: recettes
    icon: mdi:chef-hat
    theme: Soft UI
    type: panel
    badges: []
    cards:
      - type: iframe
        url: https://recettes.goygle.fr
        aspect_ratio: 100%
  - title: cctv
    path: cctv
    icon: mdi:cctv
    type: custom:grid-layout
    layout:
      grid-template-columns: 35px 500px 55px 500px 55px 500px 20px
      grid-template-rows: 10px auto auto auto
      grid-auto-flow: row
      grid-template-areas: |
        " . . . . . . . "
        " . c1 . c2 . c3 . "
        " . c4 . c5 . c6 . "
        " . c7 . c8 c8 c8 . "
    badges: []
    cards:
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.03_terrasse
              camera_image: camera.03_terrasse
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));   
            }
        view_layout:
          grid-area: c3
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.04_soussol
              camera_image: camera.04_soussol
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));  
              margin-top: 10px !important;
            }
        view_layout:
          grid-area: c4
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.05_sejour
              camera_image: camera.05_sejour
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));  
              margin-top: 10px !important;
            }
        view_layout:
          grid-area: c5
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.06_etage
              camera_image: camera.06_etage
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));  
              margin-top: 10px !important;
            }
        view_layout:
          grid-area: c6
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.07_jardin
              camera_image: camera.07_jardin
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));  
              margin-top: 15px !important;
            }
        view_layout:
          grid-area: c7
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.01_descente
              camera_image: camera.01_descente
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));   
            }
        view_layout:
          grid-area: c1
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.08_derriere
              camera_image: camera.08_derriere
              theme: Soft UI
              aspect_ratio: '2.7'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));  
              margin-top: 15px !important;
            }
        view_layout:
          grid-area: c8
      - type: custom:button-card
        template: frame
        padding-bottom: 1px
        custom_fields:
          buttons:
            card:
              show_state: false
              show_name: false
              camera_view: live
              type: picture-entity
              entity: camera.02_entree
              camera_image: camera.02_entree
              theme: Soft UI
              aspect_ratio: '1.8'
        card_mod:
          class: soft-ui
          style: |
            ha-card {
              --primary-text-color: rgb(var(--my-grey));   
            }
        view_layout:
          grid-area: c2
  - title: consos
    path: consos
    icon: mdi:chart-areaspline
    type: custom:grid-layout
    theme: Soft UI
    layout:
      grid-template-columns: 10px 600px 10px 450px 10px 600px 20px
      grid-template-rows: 20px auto
      grid-auto-flow: row
      grid-template-areas: |
        " . . . . . . . "
        " . c2 . c1 . c3 ."
    badges: []
    cards:
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: energy-usage-graph
                  card_mod:
                    style: |
                      ha-card {
                        background-color: transparent;
                        border: transparent;
                  energy-grid-consumption-color-0: rgba(var(--my-blue),0.4)
                  energy-grid-consumption-color-1: rgba(var(--my-blue),0.7)
                  energy-grid-consumption-color-2: rgba(var(--my-grey),0.2)
                  energy-grid-consumption-color-3: rgba(var(--my-grey),0.4)
                  energy-grid-consumption-color-4: rgba(var(--my-red),0.4)
                  energy-grid-consumption-color-5: rgba(var(--my-red),0.7)
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: energy-gas-graph
                  card_mod:
                    style: |
                      ha-card {
                        background-color: transparent;
                        border: transparent;
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: energy-water-graph
                  card_mod:
                    style: |
                      ha-card {
                        background-color: transparent;
                        border: transparent;
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
        view_layout:
          grid-area: c2
      - type: vertical-stack
        cards:
          - type: energy-date-selection
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: energy-distribution
                  card_mod:
                    style: |
                      ha-card {
                        background-color: transparent;
                        border: transparent;    
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
        view_layout:
          grid-area: c1
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: grid
                  columns: 2
                  square: false
                  cards:
                    - type: custom:flex-horseshoe-card
                      entities:
                        - entity: sensor.energy_total_daily
                          decimals: 0
                          name: électricité
                          unit: kWh
                          tap_action:
                            action: navigate
                            navigation_path: /dashboard-cuisine/consos
                        - entity: sensor.home_energy_meter_gen5_electric_consumed_w
                          decimals: 0
                          unit: W
                          icon: mdi:home
                          tap_action:
                            action: navigate
                            navigation_path: /dashboard-cuisine/consos
                        - entity: sensor.salleserveurswitchborneev_electric_consumed_w
                          attribute: pressure
                          decimals: 0
                          unit: W
                          icon: mdi:ev-plug-type2
                          tap_action:
                            action: navigate
                            navigation_path: /dashboard-cuisine/consos
                      show:
                        horseshoe_style: lineargradient
                      layout:
                        hlines:
                          - id: 0
                            xpos: 50
                            ypos: 42
                            length: 40
                            styles:
                              - stroke: var(--primary-text-color);
                              - stroke-width: 5;
                              - stroke-linecap: round;
                              - opacity: 0.7;
                        states:
                          - id: 0
                            entity_index: 0
                            xpos: 50
                            ypos: 34
                            styles:
                              - font-size: 3em;
                          - id: 1
                            entity_index: 1
                            xpos: 40
                            ypos: 57
                            styles:
                              - text-anchor: start;
                              - font-size: 1.5em;
                          - id: 2
                            entity_index: 2
                            xpos: 40
                            ypos: 72
                            styles:
                              - text-anchor: start;
                              - font-size: 1.5em;
                        icons:
                          - id: 0
                            entity_index: 1
                            xpos: 37
                            ypos: 57
                            align: end
                            size: 1.3
                          - id: 1
                            entity_index: 2
                            xpos: 37
                            ypos: 72
                            align: end
                            size: 1.3
                        names:
                          - id: 0
                            entity_index: 0
                            xpos: 50
                            ypos: 90
                            styles:
                              - font-size: 1.2em;
                              - opacity: 0.7;
                              - letter-spacing: 0.4em;
                              - text-transform: lowercase
                      horseshoe_scale:
                        min: 0
                        max: 80
                        color: rgba(var(--my-grey2),0.7)
                      color_stops:
                        '1': rgba(var(--my-green),0.7)
                        '2': rgba(var(--my-orange),0.7)
                      card_mod:
                        style: |
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            --primary-text-color: rgb(var(--my-grey)
                    - type: custom:flex-horseshoe-card
                      entities:
                        - entity: sensor.compteur_eau_litres
                          decimals: 0
                          name: eau
                          unit: L
                          tap_action:
                            action: navigate
                            navigation_path: /dashboard-cuisine/consos
                        - entity: sensor.water_pulse_meter
                          decimals: 1
                          unit: L/min
                          icon: mdi:water-pump
                          tap_action:
                            action: navigate
                            navigation_path: /dashboard-cuisine/consos
                        - entity: sensor.etat_reservoir
                          decimals: 0
                          unit: null
                          icon: mdi:car-coolant-level
                          tap_action:
                            action: navigate
                            navigation_path: /dashboard-cuisine/consos
                      show:
                        horseshoe_style: lineargradient
                      layout:
                        hlines:
                          - id: 0
                            xpos: 50
                            ypos: 42
                            length: 40
                            styles:
                              - stroke: var(--primary-text-color);
                              - stroke-width: 5;
                              - stroke-linecap: round;
                              - opacity: 0.7;
                        states:
                          - id: 0
                            entity_index: 0
                            xpos: 50
                            ypos: 34
                            styles:
                              - font-size: 3em;
                          - id: 1
                            entity_index: 1
                            xpos: 40
                            ypos: 57
                            styles:
                              - text-anchor: start;
                              - font-size: 1.5em;
                          - id: 2
                            entity_index: 2
                            xpos: 40
                            ypos: 72
                            styles:
                              - text-anchor: start;
                              - font-size: 1.5em;
                        icons:
                          - id: 0
                            entity_index: 1
                            xpos: 37
                            ypos: 57
                            align: end
                            size: 1.3
                          - id: 1
                            entity_index: 2
                            xpos: 37
                            ypos: 72
                            align: end
                            size: 1.3
                        names:
                          - id: 0
                            entity_index: 0
                            xpos: 50
                            ypos: 90
                            styles:
                              - font-size: 1.2em;
                              - opacity: 0.7;
                              - letter-spacing: 0.4em;
                              - text-transform: lowercase
                      horseshoe_scale:
                        min: 0
                        max: 400
                        color: rgba(var(--my-grey2),0.7)
                      color_stops:
                        '16': rgba(var(--my-blue),0.7)
                        '25': rgba(var(--my-red),0.7)
                      card_mod:
                        style: |
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            --primary-text-color: rgb(var(--my-grey)
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: energy-sources-table
                  card_mod:
                    style: |
                      ha-card > div > div > table > tbody > tr:nth-child(1) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-blue),0.3) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(2) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-blue),0.7) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(3) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-grey),0.3) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(4) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-grey),0.7) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(5) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-red),0.3) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(6) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-red),0.7) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(8) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-green),0.3) !important;
                        border: transparent;
                      }
                      ha-card > div > div > table > tbody > tr:nth-child(10) >
                      td.mdc-data-table__cell.cell-bullet > div {
                        background: rgba(var(--my-cyan),0.9) !important;
                        border: transparent;
                      }
                      ha-card {
                        background-color: transparent;
                        border: transparent;
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
        view_layout:
          grid-area: c3
  - title: extra
    path: extra
    type: custom:grid-layout
    theme: Soft UI
    icon: mdi:devices
    layout:
      grid-template-columns: 20px 255px 50px 255px 50px 550px 50px 400px 20px
      grid-template-rows: 10px 420px 30px 650px 20px 10px
      gap: 0px 0px;
      grid-auto-flow: row
      grid-template-areas: |
        ". . . . . . . . ." 
        ". tesla . mokka . imprimante . batt ."
        ". . . . . imprimante . batt ."
        ". map map map . imprimante . batt ."
        ". map map map . autre . batt ."
        ". . . . . . . . ." 
    badges: []
    cards:
      - square: false
        type: grid
        columns: 1
        cards:
          - type: vertical-stack
            cards:
              - type: custom:button-card
                name: mokka
                template: titre
              - type: custom:button-card
                template: frame
                padding-bottom: 1px
                custom_fields:
                  buttons:
                    card:
                      type: picture-elements
                      variables:
                        - battery_level: states['sensor.mokka_battery_round'].state
                      elements:
                        - type: state-label
                          entity: sensor.mokka_battery_round
                          style:
                            top: 5%
                            left: 12%
                            font-size: 15px
                            color: rgba(var(--my-grey))
                            letter-spacing: 0.2em
                        - type: state-label
                          entity: sensor.mokka_mileage_round
                          style:
                            top: 5%
                            left: 82%
                            font-size: 15px
                            color: rgba(var(--my-grey))
                            letter-spacing: 0.2em
                      image: /local/images/mokka3.png
                      card_mod:
                        style: |
                          ha-card {
                            background: transparent;
                            border: transparent;
                          }
                card_mod:
                  class: soft-ui
                  style: |
                    ha-card {
                      --primary-text-color: rgb(var(--my-grey));   
                    }
              - type: custom:button-card
                template: light
                entity: switch.mokka_clim
                icon: mdi:air-conditioner
                name: clim
        view_layout:
          grid-area: mokka
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: map
                  entities:
                    - entity: person.tibou
                    - entity: person.mathieu_goy
                    - entity: device_tracker.location_tracker
                    - entity: binary_sensor.opelmokka
                  view_layout:
                    grid-area: map
                  card_mod:
                    style: |
                      ha-card {
                        background: transparent;
                        border: transparent;
                      }
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
            view_layout:
              grid-area: map
        view_layout:
          grid-area: map
      - type: vertical-stack
        cards:
          - type: custom:button-card
            name: tesla
            template: titre
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: picture-elements
                  variables:
                    - battery_level: states['sensor.mokka_battery_round'].state
                  elements:
                    - type: state-label
                      entity: sensor.battery
                      style:
                        top: 4%
                        left: 12%
                        font-size: 15px
                        color: rgba(var(--my-grey))
                        letter-spacing: 0.2em
                    - type: state-label
                      entity: sensor.tesla_odometer_round
                      style:
                        top: 4%
                        left: 80%
                        font-size: 15px
                        color: rgba(var(--my-grey))
                        letter-spacing: 0.2em
                  image: /local/images/tesla3.png
                  card_mod:
                    style: |
                      ha-card {
                        background: transparent;
                        border: transparent;
                      }
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
          - type: horizontal-stack
            cards:
              - type: custom:button-card
                template: light
                entity: switch.mokka_clim
                icon: mdi:air-conditioner
                name: clim
                tap_action:
                  action: call-service
                  service: climate.turn_on
                  data: {}
                  target:
                    entity_id: climate.hvac_climate_system
              - type: custom:button-card
                template: light
                entity: lock.doors
                icon: mdi:car-door-lock
                name: portes
                tap_action:
                  action: call-service
                  service: lock.unlock
                  data: {}
                  target:
                    entity_id: lock.doors
        view_layout:
          grid-area: tesla
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: titre
            name: imprimante 3d
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: grid
                  columns: 1
                  cards:
                    - square: true
                      columns: 1
                      type: grid
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:threedy-card
                              base_entity: sensor.salleserveuroctoprint
                              font: Roboto
                              monitored:
                                - Status
                                - Hotend
                                - Bed
                              use_mqtt: true
                              printer_type: I3
                              name: s i d e w i n d e r
                              camera_entity: camera.cameraoctoprint
                              power_entity: switch.salleserveurimprimante3d
                              card_mod:
                                style: |
                                  threedy-card > div {
                                    border: transparent !important;
                                  }
                            - type: conditional
                              conditions:
                                - entity: sensor.salleserveuroctoprint_print_status
                                  state: Printing
                              card:
                                type: markdown
                                content: >-
                                  ![Image](http://10.10.0.138/plugin/UltimakerFormatPackage/thumbnail/{{

                                  states("sensor.salleserveuroctoprint_print_file")
                                  | replace("gcode","png",1) }})
                            - type: conditional
                              conditions:
                                - entity: sensor.salleserveuroctoprint_print_status
                                  state: Paused
                              card:
                                type: markdown
                                content: >-
                                  ![Image](http://10.10.0.138/plugin/UltimakerFormatPackage/thumbnail/{{

                                  states("sensor.salleserveuroctoprint_print_file")
                                  | replace("gcode","png",1) }})
                            - type: grid
                              columns: 4
                              square: false
                              cards:
                                - type: custom:button-card
                                  template: button_single
                                  icon: mdi:cancel
                                  styles:
                                    icon:
                                      - color: rgb(var(--my-blue))
                                  name: cancel
                                  state_display: press
                                  entity: button.octoprint_cancel_print
                                  tap_action:
                                    action: call-service
                                    service: button.press
                                    data: {}
                                    target:
                                      entity_id: button.octoprint_cancel_print
                                - type: custom:button-card
                                  template: light
                                  entity: switch.salleserveuroctoprint_pause_print
                                  icon: mdi:pause
                                  name: pause
                                - type: custom:button-card
                                  template: button_single
                                  icon: mdi:alert-octagon
                                  styles:
                                    icon:
                                      - color: rgb(var(--my-red))
                                  name: stop
                                  state_display: press
                                  entity: button.octoprint_emergency_stop
                                  tap_action:
                                    action: call-service
                                    service: button.press
                                    data: {}
                                    target:
                                      entity_id: button.octoprint_emergency_stop
                                - type: custom:button-card
                                  template: light
                                  entity: switch.salleserveurimprimante3d
                                  icon: mdi:power
                                  name: power
                      view_layout:
                        grid-area: Col1
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
                    
        view_layout:
          grid-area: imprimante
      - type: vertical-stack
        cards:
          - type: custom:button-card
            template: titre
            name: plex
          - type: custom:plex-meets-homeassistant
            protocol: http
            sort: addedAt:desc
            playTrailer: true
            showExtras: true
            showSearch: true
            ip: 10.10.0.2
            token: xDx3hzCAmYfw7H1sgxCK
            port: '32400'
            entity:
              - androidtv | media_player.shield
            libraryName: Films
            maxCount: ''
            maxRows: '2'
            useHorizontalScroll: 'No'
            useShuffle: 'No'
            displayTitleMain: 'No'
            displaySubtitleMain: 'Yes'
            minWidth: ''
            minEpisodeWidth: ''
            minExpandedWidth: ''
            fontSize1: ''
            fontSize2: ''
            fontSize3: ''
            fontSize4: ''
            minExpandedHeight: ''
            title: ''
            runBefore: ''
            runAfter: ''
            card_mod:
              style: |
                ha-card {
                  background: transparent;
                  border: transparent;
                }
          - type: vertical-stack
            cards:
              - type: custom:button-card
                template: titre
                name: batteries
              - type: custom:button-card
                template: frame
                padding-bottom: 1px
                custom_fields:
                  buttons:
                    card:
                      type: custom:auto-entities
                      card:
                        type: entities
                        show_icon: false
                        card_mod:
                          style: |
                            ha-card {
                              background: transparent;
                              border: transparent;
                            }
                      filter:
                        include:
                          - attributes:
                              device_class: battery
                            state: <30
                            domain: sensor
                        exclude:
                          - device: /iPhone/
                      sort:
                        exclude: []
                        method: state
                        numeric: true
                        reverse: true
                      show_empty: false
                      card_mod:
                        style: |
                          ha-card {
                            background: transparent;
                            border: transparent;
                          }
                card_mod:
                  class: soft-ui
                  style: |
                    ha-card {
                      --primary-text-color: rgb(var(--my-grey));   
                    }
        view_layout:
          grid-area: batt
  - theme: Soft UI
    title: reseau
    path: music
    type: custom:grid-layout
    icon: mdi:music
    layout:
      grid-template-columns: 30px 650px 100px auto 30px
      grid-template-rows: 20px auto
      grid-auto-flow: row
      grid-template-areas: |
        " . . . . . "
        " . c1 . c2 ."
    badges: []
    cards:
      - square: false
        type: grid
        columns: 1
        cards:
          - type: custom:button-card
            name: Sources
            template: titre
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  square: false
                  type: grid
                  columns: 1
                  cards:
                    - type: custom:tabbed-card
                      styles:
                        '--mdc-theme-primary': rgb(var(--my-blue))
                        '--mdc-tab-text-label-color-default': rgb(var(--my-grey))
                      tabs:
                        - attributes:
                            stacked: true
                            label: GOMIFY
                            icon: mdi:spotify
                          card:
                            type: iframe
                            url: http://10.10.0.2:3689/#/music/artists
                            aspect_ratio: 100%
                        - attributes:
                            stacked: true
                            label: YOUTUBE
                            icon: mdi:youtube
                          card:
                            type: grid
                            columns: 1
                            square: false
                            cards:
                              - type: custom:mini-media-player
                                entity: media_player.youtube_music_player
                                artwork: full-cover
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
        view_layout:
          grid-area: c2
      - square: false
        type: grid
        columns: 1
        cards:
          - type: custom:button-card
            name: volume
            template: titre
          - type: custom:button-card
            color_type: blank-card
          - type: custom:button-card
            color_type: blank-card
          - type: custom:button-card
            template: frame
            padding-bottom: 1px
            custom_fields:
              buttons:
                card:
                  type: grid
                  columns: 1
                  square: false
                  cards:
                    - type: custom:mushroom-media-player-card
                      entity: media_player.owntone_server
                      volume_controls:
                        - volume_set
                      show_volume_level: true
                      name: General
                      media_controls: []
                      icon: mdi:speaker-multiple
                      card_mod: null
                      style:
                        mushroom-state-info$: |
                          .container {
                            align-items: start;
                          }
                        mushroom-media-player-volume-control$: |
                          mushroom-slider {
                            --main-color: rgb(var(--my-orange),1) !important;
                            --bg-color: rgb(var(--my-orange),0.2) !important;
                          }
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(var(--my-orange),0.2) !important;
                          }
                        .: |
                          ha-state-icon {
                            color: rgb(var(--my-orange),1);
                            }
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            padding-left: 0px !important;
                          }
                    - type: custom:mushroom-media-player-card
                      entity: media_player.owntone_output_denon_avr_x2700h
                      volume_controls:
                        - volume_set
                      show_volume_level: true
                      name: Salon
                      use_media_info: false
                      media_controls: []
                      icon: mdi:audio-video
                      card_mod: null
                      style:
                        mushroom-state-info$: |
                          .container {
                            align-items: start;
                          }
                        mushroom-media-player-volume-control$: |
                          mushroom-slider {
                            --main-color: rgb(var(--my-blue),1) !important;
                            --bg-color: rgb(var(--my-blue),0.2) !important;
                          }
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(var(--my-blue),0.2) !important;
                          }
                        .: |
                          ha-state-icon {
                            color: rgb(var(--my-blue),1);
                            }
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            padding-left: 0px !important;
                          }
                    - type: custom:mushroom-media-player-card
                      entity: media_player.owntone_output_homepod_cuisine
                      volume_controls:
                        - volume_set
                      show_volume_level: true
                      name: Cuisine
                      use_media_info: false
                      media_controls: []
                      icon: phu:homepod-mini
                      card_mod: null
                      style:
                        mushroom-state-info$: |
                          .container {
                            align-items: start;
                          }
                        mushroom-media-player-volume-control$: |
                          mushroom-slider {
                            --main-color: rgb(var(--my-blue),1) !important;
                            --bg-color: rgb(var(--my-blue),0.2) !important;
                          }
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(var(--my-blue),0.2) !important;
                          }
                        .: |
                          ha-state-icon {
                            color: rgb(var(--my-blue),1);
                            }
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            padding-left: 0px !important;
                          }
                    - type: custom:mushroom-media-player-card
                      entity: media_player.owntone_output_salle_a_manger
                      volume_controls:
                        - volume_set
                      show_volume_level: true
                      name: Salle à manger
                      use_media_info: false
                      media_controls: []
                      icon: phu:sonos-bookshelf-vertical
                      card_mod: null
                      style:
                        mushroom-state-info$: |
                          .container {
                            align-items: start;
                          }
                        mushroom-media-player-volume-control$: |
                          mushroom-slider {
                            --main-color: rgb(var(--my-blue),1) !important;
                            --bg-color: rgb(var(--my-blue),0.2) !important;
                          }
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(var(--my-blue),0.2) !important;
                          }
                        .: |
                          ha-state-icon {
                            color: rgb(var(--my-blue),1);
                            }
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            padding-left: 0px !important;
                          }
                    - type: custom:mushroom-media-player-card
                      entity: media_player.owntone_output_homepod
                      volume_controls:
                        - volume_set
                      show_volume_level: true
                      name: Etage
                      use_media_info: false
                      media_controls: []
                      icon: phu:homepod-mini
                      card_mod: null
                      style:
                        mushroom-state-info$: |
                          .container {
                            align-items: start;
                          }
                        mushroom-media-player-volume-control$: |
                          mushroom-slider {
                            --main-color: rgb(var(--my-blue),1) !important;
                            --bg-color: rgb(var(--my-blue),0.2) !important;
                          }
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(var(--my-blue),0.2) !important;
                          }
                        .: |
                          ha-state-icon {
                            color: rgb(var(--my-blue),1);
                            }
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            padding-left: 0px !important;
                          }
                    - type: custom:mushroom-media-player-card
                      entity: media_player.owntone_output_samsung_soundbar_q990b
                      volume_controls:
                        - volume_set
                      show_volume_level: true
                      name: Salle de jeu
                      use_media_info: false
                      media_controls: []
                      icon: phu:sonos-playbar
                      card_mod: null
                      style:
                        mushroom-state-info$: |
                          .container {
                            align-items: start;
                          }
                        mushroom-media-player-volume-control$: |
                          mushroom-slider {
                            --main-color: rgb(var(--my-blue),1) !important;
                            --bg-color: rgb(var(--my-blue),0.2) !important;
                          }
                        mushroom-shape-icon$: |
                          .shape {
                            --shape-color: rgb(var(--my-blue),0.2) !important;
                          }
                        .: |
                          ha-state-icon {
                            color: rgb(var(--my-blue),1);
                            }
                          ha-card {
                            background-color: transparent;
                            border: transparent;
                            padding-left: 0px !important;
                          }
            card_mod:
              class: soft-ui
              style: |
                ha-card {
                  --primary-text-color: rgb(var(--my-grey));   
                }
        view_layout:
          grid-area: c1
